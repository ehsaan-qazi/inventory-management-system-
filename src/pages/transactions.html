<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fish Market Inventory - Transactions</title>
    <link rel="stylesheet" href="../css/styles.css">
</head>

<body>
    <div class="app-container">
        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="logo">
                <h2>FishMarket</h2>
            </div>
            <nav class="nav-menu">
                <a href="../index.html" class="nav-item">
                    <span class="icon"><img src="../assets/dashboard.png" alt="Dashboard"></span>
                    <span>Dashboard</span>
                </a>
                <a href="customers.html" class="nav-item">
                    <span class="icon"><img src="../assets/customers.png" alt="Customers"></span>
                    <span>Customers</span>
                </a>
                <a href="farmers.html" class="nav-item">
                    <span class="icon"><img src="../assets/supplier.png" alt="Farmers"></span>
                    <span>Farmers</span>
                </a>
                <a href="transactions.html" class="nav-item active">
                    <span class="icon"><img src="../assets/Transactions.png" alt="Transactions"></span>
                    <span>Transactions</span>
                </a>
                <a href="fish-categories.html" class="nav-item">
                    <span class="icon"><img src="../assets/Fish_Categories.png" alt="Fish Categories"></span>
                    <span>Fish Categories</span>
                </a>
                <a href="reports.html" class="nav-item">
                    <span class="icon"><img src="../assets/reports.png" alt="Reports"></span>
                    <span>Reports</span>
                </a>
            </nav>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <header class="header">
                <div class="search-bar">
                    <input type="text" id="searchInput" placeholder="Search transactions...">
                    <button class="search-btn"><img src="../assets/search-interface-symbol.png" alt="Search"
                            style="width: 18px; height: 18px;"></button>
                </div>
                <div class="user-info">
                    <span class="user-name">Admin</span>
                </div>
            </header>

            <section class="content">
                <h1>Transactions</h1>

                <!-- Alert container -->
                <div id="alertContainer"></div>

                <!-- Transaction Type Tabs -->
                <div style="margin-bottom: 20px;">
                    <div class="transaction-type-tabs"
                        style="display: flex; gap: 10px; border-bottom: 2px solid #e0e0e0;">
                        <button id="customerTab" class="tab-button active" onclick="switchTransactionType('customer')"
                            style="padding: 12px 30px; border: none; background: none; cursor: pointer; font-size: 16px; font-weight: 600; color: var(--primary-color); border-bottom: 3px solid var(--primary-color); transition: all 0.3s;">
                            Customer Transaction
                        </button>
                        <button id="farmerTab" class="tab-button" onclick="switchTransactionType('farmer')"
                            style="padding: 12px 30px; border: none; background: none; cursor: pointer; font-size: 16px; font-weight: 600; color: var(--text-secondary); border-bottom: 3px solid transparent; transition: all 0.3s;">
                            Farmer Transaction
                        </button>
                    </div>
                </div>

                <!-- New Transaction Form -->
                <div class="table-section">
                    <div class="section-header">
                        <h2>Create New Bill</h2>
                        <button class="btn btn-outline" onclick="toggleTransactionForm()">
                            <span id="toggleIcon">‚ñº</span> Toggle Form
                        </button>
                    </div>

                    <div id="transactionForm" style="display: block;">
                        <div class="form-row" style="margin-bottom: 20px;">
                            <div class="form-group">
                                <label for="customerSearch">Search Customer *</label>
                                <div style="position: relative;">
                                    <input type="text" id="customerSearch" class="form-control"
                                        placeholder="Type customer name or phone...">
                                    <input type="hidden" id="customerId">
                                    <div id="customerSuggestions" class="search-suggestions"></div>
                                </div>
                                <small style="color: var(--text-secondary); font-size: 12px;">
                                    Or <a href="javascript:showAllCustomers()" style="color: var(--primary-color);">view
                                        all customers</a>
                                </small>
                            </div>
                            <div class="form-group">
                                <label>Customer Balance</label>
                                <div id="customerBalance"
                                    style="padding: 10px; background: #f5f7fa; border-radius: 8px; font-weight: 600;">
                                    Search and select a customer
                                </div>
                            </div>
                        </div>

                        <!-- Items Section -->
                        <h3 style="margin: 20px 0 15px; font-size: 18px;">Bill Items</h3>
                        <table class="data-table" style="margin-bottom: 20px;">
                            <thead>
                                <tr>
                                    <th>Fish Type</th>
                                    <th>Weight</th>
                                    <th>Price/Maund</th>
                                    <th>Subtotal</th>
                                    <th>Action</th>
                                </tr>
                            </thead>
                            <tbody id="itemsTable">
                                <!-- Items will be added here -->
                            </tbody>
                        </table>

                        <!-- Add Item Form -->
                        <div style="background: #f8f9fa; padding: 20px; border-radius: 8px; margin-bottom: 20px;">
                            <h4 style="margin-bottom: 15px; font-size: 16px;">Add Item to Bill</h4>
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="fishCategoryId">Fish Type</label>
                                    <select id="fishCategoryId" class="form-control" onchange="updateItemPrice()">
                                        <option value="">-- Select Fish --</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label for="weightMaund">Weight (Maund)</label>
                                    <input type="number" id="weightMaund" class="form-control" step="1" min="0"
                                        value="0" oninput="calculateTotalWeightFromInputs()">
                                    <small style="color: var(--text-secondary); font-size: 11px;">1 Maund = 40
                                        KG</small>
                                </div>
                                <div class="form-group">
                                    <label for="weightKg">Weight (KG)</label>
                                    <input type="number" id="weightKg" class="form-control" step="0.01" min="0"
                                        value="0" oninput="calculateTotalWeightFromInputs()">
                                </div>
                                <div class="form-group">
                                    <label for="totalWeight">Total Weight</label>
                                    <input type="text" id="totalWeight" class="form-control" readonly
                                        value="0 Maund 0 KG" style="font-weight: 600;">
                                </div>
                            </div>
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="pricePerMaund">Price per Maund (Rs.)</label>
                                    <input type="number" id="pricePerMaund" class="form-control" step="0.01" readonly>
                                </div>
                                <div class="form-group">
                                    <label for="itemSubtotal">Subtotal (Rs.)</label>
                                    <input type="text" id="itemSubtotal" class="form-control" readonly value="0.00"
                                        style="font-size: 16px; font-weight: 700;">
                                </div>
                            </div>
                            <button class="btn btn-primary" onclick="addItem()">+ Add Item</button>
                        </div>

                        <!-- Totals and Payment -->
                        <div style="background: #f8f9fa; padding: 20px; border-radius: 8px; margin-bottom: 20px;">
                            <div class="form-row">
                                <div class="form-group">
                                    <label>Total Amount (Rs.)</label>
                                    <input type="text" id="totalAmount" class="form-control" readonly value="0.00"
                                        style="font-size: 18px; font-weight: 700;">
                                </div>
                                <div class="form-group">
                                    <label for="paidAmount">Paid Amount (Rs.)</label>
                                    <input type="number" id="paidAmount" class="form-control" step="0.01" min="0"
                                        value="0" oninput="calculateBalance()">
                                </div>
                                <div class="form-group">
                                    <label>Outstanding/Prepaid (Rs.)</label>
                                    <input type="text" id="balanceChange" class="form-control" readonly value="0.00"
                                        style="font-weight: 600;">
                                </div>
                            </div>

                            <div class="form-group">
                                <label for="notes">Notes (Optional)</label>
                                <textarea id="notes" class="form-control"
                                    placeholder="Add any notes or remarks..."></textarea>
                            </div>
                        </div>

                        <div style="display: flex; gap: 10px; justify-content: flex-end;">
                            <button class="btn btn-secondary" onclick="clearForm()">Clear Form</button>
                            <button class="btn btn-primary" onclick="saveTransaction()">üíæ Save Transaction</button>
                        </div>
                    </div>
                </div>

                <!-- Farmer Transaction Form -->
                <div class="table-section" id="farmerTransactionSection" style="display: none;">
                    <div class="section-header">
                        <h2>Create Farmer Transaction</h2>
                        <button class="btn btn-outline" onclick="toggleFarmerForm()">
                            <span id="toggleFarmerIcon">‚ñº</span> Toggle Form
                        </button>
                    </div>

                    <div id="farmerTransactionForm" style="display: block;">
                        <div class="form-row" style="margin-bottom: 20px;">
                            <div class="form-group">
                                <label for="farmerSearch">Search Farmer *</label>
                                <div style="position: relative;">
                                    <input type="text" id="farmerSearch" class="form-control"
                                        placeholder="Type farmer name or phone...">
                                    <input type="hidden" id="selectedFarmerId">
                                    <div id="farmerSuggestions" class="search-suggestions"></div>
                                </div>
                                <small style="color: var(--text-secondary); font-size: 12px;">
                                    Or <a href="javascript:showAllFarmers()" style="color: var(--primary-color);">view
                                        all farmers</a>
                                </small>
                            </div>
                            <div class="form-group">
                                <label>Farmer Balance</label>
                                <div id="farmerBalance"
                                    style="padding: 10px; background: #f5f7fa; border-radius: 8px; font-weight: 600;">
                                    Search and select a farmer
                                </div>
                            </div>
                        </div>

                        <!-- Fish Selection Section -->
                        <h3 style="margin: 20px 0 15px; font-size: 18px;">Fish Details</h3>
                        <div style="background: #f8f9fa; padding: 20px; border-radius: 8px; margin-bottom: 20px;">
                            <div class="form-row">
                                <div class="form-group" style="flex: 2;">
                                    <label for="farmerFishSelect">Select Fish</label>
                                    <select id="farmerFishSelect" class="form-control"
                                        onchange="updateFarmerFishPrice()">
                                        <option value="">-- Select Existing Fish --</option>
                                    </select>
                                </div>
                                <div class="form-group" style="flex: 1; display: flex; align-items: flex-end;">
                                    <button class="btn btn-outline" onclick="toggleNewFishInput()"
                                        style="width: 100%;">+ New Fish</button>
                                </div>
                            </div>

                            <!-- New Fish Input (hidden by default) -->
                            <div id="newFishInputSection" style="display: none; margin-top: 15px;">
                                <div class="form-group">
                                    <label for="newFishName">New Fish Name *</label>
                                    <input type="text" id="newFishName" class="form-control"
                                        placeholder="Enter new fish name">
                                </div>
                            </div>

                            <div class="form-row">
                                <div class="form-group">
                                    <label for="farmerWeightMaund">Weight (Maund)</label>
                                    <input type="number" id="farmerWeightMaund" class="form-control" step="1" min="0"
                                        value="0" oninput="calculateFarmerTotalWeight()">
                                    <small style="color: var(--text-secondary); font-size: 11px;">1 Maund = 40
                                        KG</small>
                                </div>
                                <div class="form-group">
                                    <label for="farmerWeightKg">Weight (KG)</label>
                                    <input type="number" id="farmerWeightKg" class="form-control" step="0.01" min="0"
                                        value="0" oninput="calculateFarmerTotalWeight()">
                                </div>
                                <div class="form-group">
                                    <label for="farmerTotalWeight">Total Weight</label>
                                    <input type="text" id="farmerTotalWeight" class="form-control" readonly
                                        value="0 Maund 0 KG" style="font-weight: 600;">
                                </div>
                            </div>

                            <div class="form-row">
                                <div class="form-group">
                                    <label for="farmerPricePerMaund">Farmer Price per Maund (Rs.) *</label>
                                    <input type="number" id="farmerPricePerMaund" class="form-control" step="0.01"
                                        min="0" oninput="calculateFarmerTotals()">
                                </div>
                                <div class="form-group">
                                    <label for="customerMarkup">Customer Markup (%) *</label>
                                    <input type="number" id="customerMarkup" class="form-control" step="1" min="0"
                                        max="100" placeholder="0-100" oninput="calculateFarmerTotals()">
                                    <small style="color: var(--text-secondary); font-size: 11px;">0% = no markup, will
                                        be added to fish category price</small>
                                </div>
                                <div class="form-group">
                                    <label>Final Price/Maund (with markup)</label>
                                    <input type="text" id="finalPricePerMaund" class="form-control" readonly
                                        style="font-weight: 600; background: #e3f2fd;">
                                </div>
                            </div>

                            <div class="form-group">
                                <label>Total Fish Value (Rs.)</label>
                                <input type="text" id="totalFishValue" class="form-control" readonly value="0.00"
                                    style="font-size: 18px; font-weight: 700; background: #e8f5e9;">
                            </div>
                        </div>

                        <!-- Charges/Deductions Section -->
                        <h3 style="margin: 20px 0 15px; font-size: 18px;">Deductions & Charges</h3>
                        <div style="background: #f8f9fa; padding: 20px; border-radius: 8px; margin-bottom: 20px;">
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="commissionPercent">Commission (%) *</label>
                                    <input type="number" id="commissionPercent" class="form-control" step="1" min="0"
                                        max="100" placeholder="0-100" oninput="calculateFarmerTotals()">
                                    <small style="color: var(--text-secondary); font-size: 11px;">0% = no commission, on
                                        original farmer price</small>
                                </div>
                                <div class="form-group">
                                    <label>Commission Amount (Rs.)</label>
                                    <input type="text" id="commissionAmount" class="form-control" readonly
                                        style="font-weight: 600; color: #d32f2f;">
                                </div>
                            </div>

                            <div class="form-row">
                                <div class="form-group">
                                    <label for="munshiNama">Munshi Nama (Rs.)</label>
                                    <input type="number" id="munshiNama" class="form-control" step="0.01" min="0"
                                        value="0" oninput="calculateFarmerTotals()">
                                </div>
                                <div class="form-group">
                                    <label for="barafPrice">Baraf Price (Rs.)</label>
                                    <input type="number" id="barafPrice" class="form-control" step="0.01" min="0"
                                        value="0" oninput="calculateFarmerTotals()">
                                </div>
                            </div>

                            <div class="form-row">
                                <div class="form-group">
                                    <label for="labourCharges">Labour Charges (Rs.)</label>
                                    <input type="number" id="labourCharges" class="form-control" step="0.01" min="0"
                                        value="0" oninput="calculateFarmerTotals()">
                                </div>
                                <div class="form-group">
                                    <label for="extraCharges">Extra Charges (Rs.)</label>
                                    <input type="number" id="extraCharges" class="form-control" step="0.01" min="0"
                                        value="0" oninput="calculateFarmerTotals()">
                                </div>
                            </div>

                            <div class="form-group">
                                <label for="farmerNotes">Notes (Optional)</label>
                                <textarea id="farmerNotes" class="form-control"
                                    placeholder="Add any notes or remarks..."></textarea>
                            </div>
                        </div>

                        <!-- Bill Preview Section -->
                        <div
                            style="background: #ffffff; padding: 20px; border-radius: 8px; margin-bottom: 20px; border: 2px solid #e0e0e0;">
                            <h3
                                style="margin: 0 0 15px 0; font-size: 18px; border-bottom: 2px solid #333; padding-bottom: 10px;">
                                üìã Bill Preview</h3>

                            <table style="width: 100%; border-collapse: collapse; font-family: monospace;">
                                <tbody>
                                    <!-- Total Fish Value -->
                                    <tr style="border-bottom: 1px solid #e0e0e0;">
                                        <td style="padding: 10px 0; font-weight: 600;">Total Fish Value</td>
                                        <td
                                            style="padding: 10px 0; text-align: right; font-weight: 600; color: #2e7d32;">
                                            Rs.<span id="billTotalFishValue">0.00</span>
                                        </td>
                                    </tr>

                                    <!-- Deductions Header -->
                                    <tr>
                                        <td colspan="2"
                                            style="padding: 10px 0 5px 0; font-weight: 600; color: var(--text-secondary); font-size: 14px;">
                                            Deductions:
                                        </td>
                                    </tr>

                                    <!-- Commission -->
                                    <tr id="billCommissionRow" style="display: none;">
                                        <td style="padding: 5px 0 5px 20px; color: var(--text-secondary);">
                                            - Commission (<span id="billCommissionPercent">0</span>%)
                                        </td>
                                        <td style="padding: 5px 0; text-align: right; color: #d32f2f;">
                                            Rs.<span id="billCommissionAmount">0.00</span>
                                        </td>
                                    </tr>

                                    <!-- Munshi Nama -->
                                    <tr id="billMunshiRow" style="display: none;">
                                        <td style="padding: 5px 0 5px 20px; color: var(--text-secondary);">
                                            - Munshi Nama
                                        </td>
                                        <td style="padding: 5px 0; text-align: right; color: #d32f2f;">
                                            Rs.<span id="billMunshiNama">0.00</span>
                                        </td>
                                    </tr>

                                    <!-- Baraf Price -->
                                    <tr id="billBarafRow" style="display: none;">
                                        <td style="padding: 5px 0 5px 20px; color: var(--text-secondary);">
                                            - Baraf Price
                                        </td>
                                        <td style="padding: 5px 0; text-align: right; color: #d32f2f;">
                                            Rs.<span id="billBarafPrice">0.00</span>
                                        </td>
                                    </tr>

                                    <!-- Labour Charges -->
                                    <tr id="billLabourRow" style="display: none;">
                                        <td style="padding: 5px 0 5px 20px; color: var(--text-secondary);">
                                            - Labour Charges
                                        </td>
                                        <td style="padding: 5px 0; text-align: right; color: #d32f2f;">
                                            Rs.<span id="billLabourCharges">0.00</span>
                                        </td>
                                    </tr>

                                    <!-- Extra Charges -->
                                    <tr id="billExtraRow" style="display: none;">
                                        <td style="padding: 5px 0 5px 20px; color: var(--text-secondary);">
                                            - Extra Charges
                                        </td>
                                        <td style="padding: 5px 0; text-align: right; color: #d32f2f;">
                                            Rs.<span id="billExtraCharges">0.00</span>
                                        </td>
                                    </tr>

                                    <!-- Net Amount -->
                                    <tr style="border-top: 2px solid #333; border-bottom: 2px double #333;">
                                        <td style="padding: 15px 0 10px 0; font-weight: 700; font-size: 16px;">
                                            Net Amount to Farmer
                                        </td>
                                        <td
                                            style="padding: 15px 0 10px 0; text-align: right; font-weight: 700; font-size: 18px; color: #1976d2;">
                                            Rs.<span id="billNetToFarmer">0.00</span>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>

                            <p
                                style="margin: 15px 0 0 0; color: var(--text-secondary); font-size: 12px; text-align: center; font-style: italic;">
                                This preview updates automatically as you enter values
                            </p>
                        </div>

                        <!-- Payment Section -->

                        <div
                            style="background: #fff3cd; padding: 20px; border-radius: 8px; margin-bottom: 20px; border: 2px solid #ffc107;">
                            <div
                                style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                                <div>
                                    <h3 style="margin: 0 0 10px 0; font-size: 20px;">Net Amount to Farmer</h3>
                                    <p style="margin: 0; color: var(--text-secondary);">Fish Value - Commission - All
                                        Charges</p>
                                </div>
                                <div style="font-size: 32px; font-weight: 700; color: #2e7d32;">
                                    Rs.<span id="netToFarmer">0.00</span>
                                </div>
                            </div>

                            <div class="form-row"
                                style="margin-top: 20px; padding-top: 20px; border-top: 2px dashed #ffc107;">
                                <div class="form-group">
                                    <label for="farmerPaidAmount">Amount Paid Now (Rs.) *</label>
                                    <input type="number" id="farmerPaidAmount" class="form-control" step="0.01" min="0"
                                        value="0" oninput="calculateFarmerBalance()"
                                        style="font-size: 18px; font-weight: 600;">
                                    <small style="color: var(--text-secondary); font-size: 11px;">Enter the amount
                                        you're paying to the farmer now</small>
                                </div>
                                <div class="form-group">
                                    <label>Balance After Transaction</label>
                                    <input type="text" id="farmerBalanceChange" class="form-control" readonly
                                        style="font-size: 18px; font-weight: 600; background: #f5f5f5;">
                                </div>
                            </div>
                        </div>

                        <div style="display: flex; gap: 10px; justify-content: flex-end;">
                            <button class="btn btn-secondary" onclick="clearFarmerForm()">Clear Form</button>
                            <button class="btn btn-primary" onclick="saveFarmerTransaction()">üíæ Save Farmer
                                Transaction</button>
                        </div>
                    </div>
                </div>

                <!-- Recent Transactions -->
                <div class="table-section">
                    <div class="section-header">
                        <h2>Recent Transactions</h2>
                        <button class="btn btn-outline btn-small" onclick="loadTransactions()">üîÑ Refresh</button>
                    </div>

                    <!-- Search Filters -->
                    <div class="search-filters"
                        style="margin-bottom: 20px; padding: 15px; background: #f8f9fa; border-radius: 8px;">
                        <div class="form-row">
                            <div class="form-group">
                                <label for="filterCustomerName">Filter by Customer</label>
                                <input type="text" id="filterCustomerName" class="form-control"
                                    placeholder="Enter customer name..." onkeyup="applyFilters()">
                            </div>
                            <div class="form-group">
                                <label for="filterPaymentStatus">Filter by Status</label>
                                <select id="filterPaymentStatus" class="form-control" onchange="applyFilters()">
                                    <option value="">All Transactions</option>
                                    <option value="paid">Paid</option>
                                    <option value="unpaid_partial">Unpaid & Partial</option>
                                    <option value="unpaid">Unpaid Only</option>
                                    <option value="partial">Partial Only</option>
                                </select>
                            </div>
                            <div class="form-group" style="display: flex; align-items: flex-end;">
                                <button class="btn btn-outline" onclick="clearFilters()">Clear Filters</button>
                            </div>
                        </div>
                    </div>

                    <!-- Pagination Controls -->
                    <div class="pagination-controls"
                        style="margin-bottom: 15px; display: flex; justify-content: space-between; align-items: center;">
                        <div>
                            <select id="transPageSize" class="form-control" style="width: auto; display: inline-block;"
                                onchange="changeTransPageSize()">
                                <option value="25">25 per page</option>
                                <option value="50" selected>50 per page</option>
                                <option value="100">100 per page</option>
                            </select>
                        </div>
                        <div class="pagination-buttons">
                            <button class="btn btn-outline btn-small" onclick="previousTransPage()" id="prevTransBtn"
                                disabled>‚Üê Previous</button>
                            <span id="transPageInfo" style="margin: 0 15px; font-weight: 500;">Page 1 of 1</span>
                            <button class="btn btn-outline btn-small" onclick="nextTransPage()" id="nextTransBtn"
                                disabled>Next ‚Üí</button>
                        </div>
                    </div>

                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Bill #</th>
                                <th>Date</th>
                                <th>Customer</th>
                                <th>Total</th>
                                <th>Paid</th>
                                <th>Status</th>
                                <th style="width: 120px;">Actions</th>
                            </tr>
                        </thead>
                        <tbody id="transactionsTable">
                            <tr>
                                <td colspan="7" class="no-data">Loading transactions...</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </section>
        </main>
    </div>

    <!-- Edit Transaction Modal -->
    <div class="modal" id="editTransactionModal">
        <div class="modal-content" style="max-width: 800px;">
            <div class="modal-header">
                <h3>Edit Transaction #<span id="editTxnId"></span></h3>
                <button class="modal-close" onclick="closeEditTransactionModal()">√ó</button>
            </div>
            <div class="modal-body">
                <div id="editAlertContainer"></div>

                <div class="form-group">
                    <label>Customer</label>
                    <input type="text" id="editCustomerName" class="form-control" readonly style="background: #f0f0f0;">
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="editPaidAmount">Paid Amount (Rs.)</label>
                        <input type="number" id="editPaidAmount" class="form-control" step="0.01" min="0">
                    </div>
                    <div class="form-group">
                        <label>Total Amount (Rs.)</label>
                        <input type="text" id="editTotalAmount" class="form-control" readonly
                            style="background: #f0f0f0;">
                    </div>
                </div>

                <div class="form-group">
                    <label for="editNotes">Notes</label>
                    <textarea id="editNotes" class="form-control"></textarea>
                </div>

                <div style="padding: 10px; background: #fff3cd; border-radius: 6px; margin-top: 15px;">
                    <strong>‚ö†Ô∏è Note:</strong> You can only edit the paid amount and notes. Items cannot be modified. To
                    change items, create a new transaction.
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeEditTransactionModal()">Cancel</button>
                <button class="btn btn-primary" onclick="saveEditedTransaction()">Save Changes</button>
            </div>
        </div>
    </div>

    <!-- View Bill Modal -->
    <div class="modal" id="viewBillModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Bill Details</h3>
                <button class="modal-close" onclick="closeViewBillModal()">√ó</button>
            </div>
            <div class="modal-body">
                <div id="billContent">
                    <!-- Bill content will be loaded here -->
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeViewBillModal()">Close</button>
                <button class="btn btn-primary" onclick="printBill()">üñ®Ô∏è Print Bill</button>
            </div>
        </div>
    </div>

    <script src="../js/utils.js"></script>
    <script src="../js/validation.js"></script>
    <script src="../js/transactions.js"></script>
</body>

</html>